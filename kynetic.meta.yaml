kynetic_meta: "1.0"
agents: []
workflows: []
conventions: []
observations:
  - _ulid: 01KG1YEE33BMDR3E1FE1VX4MVH
    type: success
    content: Using TodoWrite tool for multi-step tasks provides clear progress tracking and prevents
      skipped steps. Breaking tasks like 'setup vitest' into 6 subtodos made progress visible and
      ensured nothing was missed.
    created_at: 2026-01-28T09:20:10.852Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG1YEP72KPW7G9YXFHBYZ5CA
    type: friction
    content: "PR workflow requires 6 repetitive steps per task: create branch, push, create PR, merge,
      checkout main, pull. Repeated 4 times this session. The /pr skill exists but doesn't handle
      the full cycle including post-merge cleanup."
    created_at: 2026-01-28T09:20:19.170Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG1YEZB5GWASFRXGQ48ZY0KD
    type: friction
    content: Created 6 identical vitest.config.ts files using bash loop workaround. No built-in way to
      create multiple files from template. Used heredoc in for loop which works but feels like
      missing tool capability.
    created_at: 2026-01-28T09:20:28.517Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2FKMXRMR0YGD6KGTNWX878
    type: success
    content: Task dependency chain automatically managed ready state - @01KG1TCV became ready
      immediately after @01KG2ER6 completed, no manual coordination needed. This validates the
      depends_on relationship model.
    created_at: 2026-01-28T14:20:07.480Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2FKVX1PBMNR3TFVRBH9058
    type: friction
    content: Build artifacts (dist/, *.tsbuildinfo, node_modules subdirs) appear in git status and must
      be manually excluded when staging. Task @01KG2ESG only covers coverage/ but pattern applies to
      all build output.
    created_at: 2026-01-28T14:20:14.625Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2GCKCB7MC1S979703A1NRQ
    type: success
    content: "Git operations require project root directory. Using explicit 'cd
      /home/chapel/Projects/kynetic-bot' before git commands prevents path errors. Pattern: always
      return to project root before git/kspec commands."
    created_at: 2026-01-28T14:33:45.099Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2GCWHG94HCM5JPXT124YKE
    type: success
    content: "Test-driven AC coverage workflow: 1) Read spec ACs from task start message, 2) Write tests
      covering each AC with // AC: @spec-ref ac-N comments, 3) Implement features, 4) Verify all ACs
      covered in task note. This systematic approach ensured 100% AC coverage across 5 tasks with
      60+ tests."
    created_at: 2026-01-28T14:33:54.480Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2GD4C1TTAYVK64262D89RR
    type: success
    content: "Automation loop effectiveness: /task-work loop successfully completed 5 tasks (P1-P3) in
      single session by systematically selecting highest-priority eligible tasks. Task metadata
      (automation: eligible, priority, dependencies) enabled fully autonomous execution. Completed:
      SessionKeyRouter, ChannelRegistry, .gitignore update, MessageTransformer, StreamCoalescer."
    created_at: 2026-01-28T14:34:02.498Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2H01PB4FFJRZ429D8HVD4A
    type: friction
    content: Test utilities (@kynetic-bot/core/test-utils) not exported in package.json. Had to inline
      delay() helper in lifecycle tests. Need to add exports field to core/package.json for
      test-utils subpath or re-export from main index.
    created_at: 2026-01-28T14:44:22.347Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2H072QQ764PNJ5DV7W9AZJ
    type: success
    content: Direct commits to main in automation loop mode. When running /task-work loop, committing
      directly to main (not creating PR branches) reduces overhead for automation-eligible tasks.
      Allows immediate completion without PR merge wait.
    created_at: 2026-01-28T14:44:27.864Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2H0DF19J72BESHPN4G34WJ
    type: friction
    content: KyneticError constructor parameter order (message, code) is opposite of typical Error(code,
      message) patterns. Led to initial implementation errors in SizeLimitError and
      UnsupportedMediaTypeError. Consider documenting parameter order prominently or adding JSDoc
      examples.
    created_at: 2026-01-28T14:44:34.401Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG2H0K4YXKN2BWDHMTMK7MPK
    type: success
    content: "Comprehensive test coverage (24-27 tests per feature) caught errors early. All issues
      found during initial test run, not in later integration. Pattern: implement -> test -> fix ->
      verify builds -> commit."
    created_at: 2026-01-28T14:44:40.222Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG34K3VYD8FHY2E5P470C541
    type: success
    content: "Multi-stage subagent review cycle for spec work: 1) Explore agents gather context from
      multiple sources in parallel, 2) Plan agent designs implementation, 3) Review agent validates
      plan against patterns/requirements, 4) Revise based on feedback. This caught trait eligibility
      gaps and missing dependencies that would have caused rework."
    created_at: 2026-01-28T20:26:50.111Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG4E8Z32VWJTGFH8G2EX5VYB
    type: friction
    content: Created duplicate task (@01KG4D9F) without checking existing tasks. Subagent MVP analysis
      didn't surface @bot-integration. Should run 'kspec search' before creating new tasks to avoid
      duplication.
    created_at: 2026-01-29T08:35:17.730Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG4E95FYZXJWQP5CPC459KFK
    type: success
    content: "Subagent delegation for task evaluation was highly effective - comprehensive analysis of 7
      tasks with specific recommendations for each. Pattern: spawn Explore agent with specific
      evaluation criteria."
    created_at: 2026-01-29T08:35:24.286Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG4E9BYZMV89X67PDMWVBDWY
    type: success
    content: "Incremental clarification via AskUserQuestion one at a time kept decisions focused. Used
      for: skill implementation approach (hybrid), storage strategy (YAML+KbotShadow), fallback
      behavior (retry spawn)."
    created_at: 2026-01-29T08:35:30.911Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG4KVNFB2XQHVHWYXFC6ZNKJ
    type: success
    content: Iterative review cycles with parallel verification + holistic subagents caught issues early
      (missing traits, relates_to gaps, AC clarity). Running reviews after each fix round prevented
      compounding errors.
    created_at: 2026-01-29T10:12:53.355Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG4KVPZ6B8J0MJ5S26ZNAAHN
    type: success
    content: Having a Plan subagent review the plan before execution caught syntax errors (e.g., kspec
      trait add only accepts one trait). Pre-flight review of CLI commands prevents failed
      executions.
    created_at: 2026-01-29T10:12:54.886Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG4QVCBYSMX7CJTXGXG4JP43
    type: friction
    content: "Session inherited dirty working tree from previous iteration (feat/bot-config branch with
      uncommitted bot package changes). Required manual stash/branch/restore dance to isolate
      escalation-handler work. Consider: automation sessions should start from clean main branch."
    created_at: 2026-01-29T11:22:38.334Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG4QVJ8KHZS5G9N19TKW0VPJ
    type: success
    content: EscalationHandler implementation followed established patterns (SkillsRegistry,
      AgentLifecycle) - EventEmitter extension, KyneticError hierarchy, createLogger pattern. Made
      implementation straightforward and review focused on AC coverage rather than architectural
      issues.
    created_at: 2026-01-29T11:22:44.371Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG5K5N7K737Q3QHPZNZ8HTV3
    type: success
    content: "Parallel subagent delegation: Spawned 4 analysis agents simultaneously (PR reviews, AC
      conformance, test quality, session patterns) to analyze ralph loop. Each produced focused
      results, combined into comprehensive report. Key: did cursory exploration first to understand
      scope and write well-scoped prompts."
    created_at: 2026-01-29T19:20:06.644Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG5K5P9XGAKJNWCEFNYP74WW
    type: success
    content: "Structured recommendation walkthrough: Used AskUserQuestion with concrete options for each
      recommendation. Kept discussion focused, captured clear decisions, enabled appropriate routing
      (code tasks vs process improvements to different projects)."
    created_at: 2026-01-29T19:20:07.741Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG5ZCJES911K5CTJCNA2F45E
    type: success
    content: "Vitest mock pattern for Discord.js Client: define MockClient class inside vi.mock factory
      extending EventEmitter, use globalThis to share instance reference with tests. Works around
      hoisting issues."
    created_at: 2026-01-29T22:53:36.090Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG61EADG3NAH0TK3GT2G4SSF
    type: success
    content: Creating proper Error subclasses (JsonRpcException) instead of inline eslint-disables for
      throw statements - better architecture, type-safe, and reusable
    created_at: 2026-01-29T23:29:30.544Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG65095CTJVMXS8W8FVB2EHC
    type: success
    content: "Review subagent as quality gate before PR: caught 3 TypeScript compilation errors that
      tests with mocks didn't catch. Pattern: spawn review agent to check AC coverage + run tsc
      --noEmit after implementation."
    created_at: 2026-01-30T00:31:44.812Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG6H8JJN21WXPQ8BM5WQF2MF
    type: idea
    content: ACP requestPermission handler should escalate to user instead of auto-allowing - current
      MVP auto-allows
    created_at: 2026-01-30T04:05:59.510Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG6WP6CDRKEYP8V6YY37BV7T
    type: success
    content: "Class mock with constructor arg capture: When testing internal wiring (e.g., what args Bot
      passes to KbotShadow), mock the dependency as a class that captures constructor options to a
      module-level variable. Allows asserting internal behavior without exposing internals or
      modifying source. Pattern: vi.mock('module', () => ({ Class: class { constructor(opts) {
      capturedOpts = opts; } } })). Used in bot.test.ts for AC-7/AC-6 tests."
    created_at: 2026-01-30T07:25:40.109Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG729K6CV305R6MPNAW90WS3
    type: success
    content: Subagent holistic review after implementation caught AC-5 test mislabeling - test was
      labeled AC-5 but tested error resilience instead of persistence. Review found spec-test
      mismatch before PR merge.
    created_at: 2026-01-30T09:03:38.701Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG7681ZHJJGCKDPND43KX9A2
    type: success
    content: "Triage flow: session start → automation assessment → blocked task fixes → inbox
      categorization → design discussions. Kept session organized and progressively deeper."
    created_at: 2026-01-30T10:12:42.609Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG7683FD295RWYCF7CHN43WP
    type: success
    content: Parallel subagent research (personalization + kspec library) during design discussion -
      provided synthesis material without blocking conversation.
    created_at: 2026-01-30T10:12:44.141Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG7689DYC00FQVPNTGKV5WVM
    type: friction
    content: Discovered kbot reimplemented kspec shadow branch instead of using kspec as library -
      parallel implementations create maintenance burden and miss improvements. Already captured in
      inbox (01KG756X) but worth noting as pattern to watch for.
    created_at: 2026-01-30T10:12:50.239Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG793HXBGTVXMF3TZFV4SDQC
    type: success
    content: "Provider interface + Mock pattern: Creating SummaryProvider interface with
      HaikuSummaryProvider (production) and MockSummaryProvider (test) side-by-side enabled
      comprehensive testing without external dependencies. Pattern reusable for other ACP-dependent
      features."
    created_at: 2026-01-30T11:02:40.811Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG7A5WW0VMZ3VWVVNZJ8CT7Y
    type: success
    content: Checkpoint-based testing for circuit breaker states - testing state transitions via
      restoreFromCheckpoint() proved more reliable than attempting to trigger async loop behavior
      with fake timers. Use this pattern for testing stateful async components.
    created_at: 2026-01-30T11:21:26.144Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG7A628XR3KKSWGGEF9H2J2E
    type: friction
    content: "Testing async loops with vitest fake timers - vi.advanceTimersByTimeAsync() interacts
      poorly with async/await in continuous loops. Tests would time out or not trigger expected
      errors. Workaround: use real timers with short intervals OR test via checkpoint/restore for
      state verification."
    created_at: 2026-01-30T11:21:31.677Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG7A68RG6VQ5F0NZS7TE1RX1
    type: success
    content: Task workflow adherence - following kspec task start/note/submit/PR flow kept
      implementation tracked. Notes captured decision rationale (compaction approach clarification)
      that helped maintain context across the session.
    created_at: 2026-01-30T11:21:38.320Z
    author: "@claude"
    resolved: false
    resolution: null
  - _ulid: 01KG7AQ2E7PRZM07YHV83TJA0A
    type: success
    content: "Optional interface method pattern for backwards-compatible extension: Added editMessage?()
      to ChannelAdapter interface (optional with ?) so existing adapters don't need changes. Callers
      use optional chaining (adapter.editMessage?.()). Allows incremental adoption across
      platforms."
    created_at: 2026-01-30T11:30:48.903Z
    author: "@claude"
    resolved: false
    resolution: null
includes: []
