inbox:
  - _ulid: 01KG5Z1KS7G4V7V09QT1VHTM9Y
    text: "Discord adapter: make bot message filtering configurable (currently filters all bots, not
      just self)"
    created_at: 2026-01-29T22:47:36.999Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG65AGK23RM64JPCPWW7ZAEF
    text: "Ensure task workflow is followed when implementing plans in new context - problem: plans
      focus on what to build, not the kspec workflow (task start/notes/submit/complete). Agent jumps
      to implementation without starting task. Potential fixes: (1) plan template includes 'kspec
      task start @slug' as first step, (2) CLAUDE.md implementation checklist, (3) session start
      detects pending tasks with ready plans, (4) hook on plan approval."
    created_at: 2026-01-30T00:37:20.098Z
    tags:
      - reflection
      - workflow
    added_by: "@claude"
  - _ulid: 01KG6YH3TC9G5PZWADXPE1ZBX0
    text: "Discord threads for subagent execution - Claude Code ACP already supports Task
      tool/subagents. Wire subagent spawning to create Discord threads: thread starter = task
      prompt, replies = tool calls/thinking/results, auto-archive on completion. Flatten nested
      subagents (Discord limitation). Enable when ready, not urgent."
    created_at: 2026-01-30T07:57:50.796Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG756XS1SYF6NM7D060N9TB1
    text: Kbot reimplements kspec shadow branch instead of using kspec as library.
      packages/memory/src/shadow/ duplicates functionality from kspec's parser/shadow.ts. Should add
      kspec as dependency and use its shadow branch utilities (detectShadow, initializeShadow,
      commitIfShadow, etc.) instead of maintaining parallel implementation. May need to parameterize
      kspec's shadow for different branch names (.kbot vs .kspec) or extend it.
    created_at: 2026-01-30T09:54:36.962Z
    tags:
      - architecture
      - tech-debt
    added_by: "@claude"
  - _ulid: 01KG7579T4KVDRP3G84GBG05FV
    text: >-
      Bot Personality System Design (from triage discussion):


      **System prompt injection (always included):**

      - Core identity (name, role, boundaries)

      - Recent important events/info


      **Storage (via kspec primitives in .kbot/):**

      - identity section in kbot.meta.yaml

      - observations for learned patterns

      - session context for ephemeral state


      **Communication preferences to track:**

      - Verbosity (concise/detailed)

      - Formality (casual/professional)  

      - Structure (bullets/prose)

      - Expertise level assumption


      **Evolution:**

      - Explicit: User tells bot directly

      - Reflection: Automatic + collaborative with user

      - Implicit: Derived from reflection


      **Blocked on:** kspec library integration (01KG756X) - should use kspec observations/meta
      rather than custom implementation


      **Research captured:** See personalization research from triage session - memory taxonomies,
      what to track, anti-patterns
    created_at: 2026-01-30T09:54:49.284Z
    tags:
      - personality
      - design
    added_by: "@claude"
  - _ulid: 01KG9C1KWKFVK7YG588VN6BXYQ
    text: Create test harness to validate commands against real Claude Code instance - smoke tests for
      /context, /help and other commands to prevent silent failures. Integration test suite for
      harness-Claude Code interaction. Would have caught the /usage vs /context issue early.
    created_at: 2026-01-31T06:32:31.891Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG9G7E3ZMH4MG0VA2S31YWP7
    text: "One-off and recurring triggers: Trigger system for scheduling agent activations with
      instructions. Enables semi-regular triggers for proactive assistance and autonomous task
      management. Should support both one-time and recurring schedules (cron-like)."
    created_at: 2026-01-31T07:45:36.896Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG9G7GE625ND7B9HDZH3TW4K
    text: "Multi-ACP-provider support: Enable using different ACP-compliant agent systems (codex-cli,
      gemini-cli, opencode-cli) as backends. Allow different models (OpenAI, Gemini, etc.) for
      different agents/subagents based on their strengths. Requires smoothing over provider
      differences for consistent behavior."
    created_at: 2026-01-31T07:45:39.271Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG9JB5P77ASACB9MY8KTFW6Q
    text: Add timing assertion utility with tolerance for flaky CI tests - tests using exact ms
      comparisons (e.g., expect(timeDiff).toBeGreaterThanOrEqual(100)) fail in CI due to timing
      jitter. Create a test utility like expectTiming(actual, expected, toleranceMs) or document the
      pattern of subtracting 5ms tolerance.
    created_at: 2026-01-31T08:22:36.488Z
    tags:
      - reflection
      - testing
    added_by: "@claude"
  - _ulid: 01KG9M9R7X1S9C1V1BCZDZMK4Q
    text: "Webhook security research: Stateless middleman pattern for webhook delivery without opening
      bot to internet. WebSocket registration, JWT auth, best practices. Needed for trigger system
      Phase 3 webhook implementation."
    created_at: 2026-01-31T08:56:47.102Z
    tags: []
    added_by: Test
  - _ulid: 01KGBYB4XGWYS60YH2CGFXGTM5
    text: "Test helper factory: Create createMockTurn() and createMockSession() factories that
      centralize mock object creation. When schema changes, update one place instead of 70+ tests."
    created_at: 2026-02-01T06:30:47.473Z
    tags:
      - reflection
      - testing
      - dx
    added_by: "@claude"
  - _ulid: 01KGCC7QT1T8Y3NEE83JY8QB2P
    text: "PR review workflow: Check spec coverage for new code. When reviewing PRs that add new
      functionality, detect new methods/behaviors and verify they have corresponding spec AC
      coverage. Flag gaps before approving."
    created_at: 2026-02-01T10:33:35.809Z
    tags:
      - reflection
      - workflow
      - pr-review
    added_by: "@claude"
  - _ulid: 01KGCC7TKVXB2QBPR3PMCAM5FG
    text: "local-review skill: Validate test AC comments reference valid spec items. Pattern match '//
      AC: @spec-item ac-N' comments against kspec item list to catch incorrect references before
      PR."
    created_at: 2026-02-01T10:33:38.684Z
    tags:
      - reflection
      - workflow
      - local-review
    added_by: "@claude"
  - _ulid: 01KGD394AJ23JQSB4YNFJ6R3FA
    text: "Add dedicated regression test for splitMessage/splitMessageToEmbeds code block continuation
      prefix fix - ensure prefix is added when remaining text fits in final chunk (bug fixed in PR
      #64)"
    created_at: 2026-02-01T17:16:18.642Z
    tags:
      - testing,discord,regression
    added_by: "@claude"
  - _ulid: 01KGDCX7682MV25YRCG4804S4B
    text: Test files not linted - eslint config ignores **/test/** due to tsconfig project service
      exclusion. Should configure eslint/tsconfig to lint test files for code quality
    created_at: 2026-02-01T20:04:34.120Z
    tags:
      - dx
      - tooling
    added_by: "@claude"
  - _ulid: 01KGDSY3EM9726H4566X9Z43QB
    text: Task merge/absorb command - when work for task A gets done as part of task B, provide a way to
      absorb A into B (transferring notes, linking in completion reason). Avoids zombie tasks that
      require verification ceremony for no actual work.
    created_at: 2026-02-01T23:52:14.548Z
    tags:
      - reflection
      - kspec-cli
    added_by: "@claude"
  - _ulid: 01KGE8EJ8ST3713KW1PQZXZP2X
    text: Cross-package event contracts (like turn:end between bot and channels) should have spec
      coverage before implementation. Consider a checklist item or workflow step to identify and
      spec cross-package contracts during design phase.
    created_at: 2026-02-02T04:05:54.073Z
    tags:
      - reflection
      - workflow
    added_by: "@claude"
  - _ulid: 01KGG88RW62Z2M6WCQ4YQT1MBJ
    text: Test helper for controllable async agent responses - reusable mock factory with explicit
      promise resolution for testing streaming/inflight message scenarios. Current approach requires
      complex setup and caused stack overflow in initial attempt.
    created_at: 2026-02-02T22:41:13.094Z
    tags:
      - reflection
      - testing
    added_by: "@claude"
  - _ulid: 01KGGMQZVXQN955TBK3J186X6V
    text: Discord tool widget expand button not functional - AC-4 (expand button shows full output) is
      in spec but not implemented/working. Need to wire up Discord component interaction handler and
      follow-up message logic.
    created_at: 2026-02-03T02:19:14.685Z
    tags:
      - bug
      - discord
    added_by: "@claude"
