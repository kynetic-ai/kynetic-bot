inbox:
  - _ulid: 01KG4KV8GTP8PZ4TKFWWNNWW9J
    text: Spec review workflow/skill that runs verification + holistic review after spec changes. Would
      automate the repeated 'run two subagents to check plan vs implementation and find gaps'
      pattern.
    created_at: 2026-01-29T10:12:40.090Z
    tags:
      - reflection
      - workflow
    added_by: "@claude"
  - _ulid: 01KG4KVBQ3QR4TD0H3FR39HAT3
    text: "Allow kspec item trait add to accept multiple traits: kspec item trait add @spec @trait1
      @trait2 @trait3 instead of requiring separate commands for each trait."
    created_at: 2026-01-29T10:12:43.363Z
    tags:
      - reflection
      - kspec-cli
    added_by: "@claude"
  - _ulid: 01KG4KVDRYATHAAE28D4DBTNXK
    text: Display relates_to and depends_on fields in kspec item get output. Currently these fields are
      only visible by reading the YAML directly.
    created_at: 2026-01-29T10:12:45.470Z
    tags:
      - reflection
      - kspec-cli
    added_by: "@claude"
  - _ulid: 01KG5Z1EH2MCEN3B1ZNSYZV1DZ
    text: "Discord adapter: add health check support using client.ws.ping for latency monitoring"
    created_at: 2026-01-29T22:47:31.618Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG5Z1KS7G4V7V09QT1VHTM9Y
    text: "Discord adapter: make bot message filtering configurable (currently filters all bots, not
      just self)"
    created_at: 2026-01-29T22:47:36.999Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG5Z1PKTSJEJ9RDMTWEHXVM7
    text: "Discord adapter: expand DiscordSendOptions for ephemeral messages, thread options, slash
      command support"
    created_at: 2026-01-29T22:47:39.899Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG64MZRWM8MDBAC0WENA5YN9
    text: "Bot: Consider using TypedEventEmitter pattern for type-safe event names and payloads instead
      of base EventEmitter"
    created_at: 2026-01-30T00:25:34.748Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG64NC1W6K081646FVDWVAGH
    text: "Bot: Forward ChannelLifecycle events (health, reconnection) for completeness - currently only
      AgentLifecycle events are forwarded"
    created_at: 2026-01-30T00:25:47.325Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG6503G0CXW2FJHRQ9F6AMYY
    text: CLI tool to inspect types from dependencies - e.g. 'pnpm types @agentclientprotocol/sdk
      NewSessionRequest' to show type definition from .d.ts files. Could support --expand to follow
      type references. Helps with SDK integration without digging through node_modules/.pnpm/
    created_at: 2026-01-30T00:31:39.008Z
    tags:
      - reflection
      - dx
    added_by: "@claude"
  - _ulid: 01KG65AGK23RM64JPCPWW7ZAEF
    text: "Ensure task workflow is followed when implementing plans in new context - problem: plans
      focus on what to build, not the kspec workflow (task start/notes/submit/complete). Agent jumps
      to implementation without starting task. Potential fixes: (1) plan template includes 'kspec
      task start @slug' as first step, (2) CLAUDE.md implementation checklist, (3) session start
      detects pending tasks with ready plans, (4) hook on plan approval."
    created_at: 2026-01-30T00:37:20.098Z
    tags:
      - reflection
      - workflow
    added_by: "@claude"
  - _ulid: 01KG6YGV7WNKPBHRRYFDGJ7E1A
    text: Session context not persisting - investigate why session/conversation files aren't being
      written to .kbot, then implement replay of recent turns on new ACP session to restore context.
      Storage infrastructure exists (turns.jsonl, events.jsonl, ConversationStore) but appears
      unused. Quick win once storage is working.
    created_at: 2026-01-30T07:57:42.012Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG6YGZ6GQTQBHEV4Z1MSN53V
    text: Rich tool call widgets for Discord - extend adapter with embed/component support. Create
      ToolWidgetBuilder for different tool kinds (bash, read, write, etc), ToolCallTracker for
      message editing, MessageUpdateBatcher for rate limit handling. ACP already provides
      tool_call/tool_call_update events.
    created_at: 2026-01-30T07:57:46.064Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG6YH21GSSXP27SXF4D26279
    text: "System prompt and personality configuration - .kbot is the bot's brain using kspec as
      library. Inject dynamic context: observations (friction/success patterns), session focus,
      active work, user interests. Static base capabilities + dynamic per-session injection.
      Personality evolves from observed patterns over time."
    created_at: 2026-01-30T07:57:48.976Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG6YH3TC9G5PZWADXPE1ZBX0
    text: "Discord threads for subagent execution - Claude Code ACP already supports Task
      tool/subagents. Wire subagent spawning to create Discord threads: thread starter = task
      prompt, replies = tool calls/thinking/results, auto-archive on completion. Flatten nested
      subagents (Discord limitation). Enable when ready, not urgent."
    created_at: 2026-01-30T07:57:50.796Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG6YHBSF6ZJSS9MD6M5ZDHPD
    text: Bash command widget - show command, exit code, duration, output preview (first 10 lines).
      Expand button for full output. Part of rich tool widgets work.
    created_at: 2026-01-30T07:57:58.959Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG6YHEF3Y2BE0R3RF2GQ3CJN
    text: File diff widget - syntax highlighting via Discord code blocks, diff display with +/-
      prefixes, line range info, expand button for full content. Part of rich tool widgets work.
    created_at: 2026-01-30T07:58:01.699Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG6YHG61RF5V3VQQTJT4GFQB
    text: Interactive expand/collapse buttons for tool outputs - Discord components for showing full
      output on demand. Store expanded content in memory, use ephemeral follow-ups for large
      content. Part of rich tool widgets work.
    created_at: 2026-01-30T07:58:03.457Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG6YHJBZGFNBHDVGXRG6CXF9
    text: Per-user personality evolution - track user-specific patterns in .kbot, evolve communication
      style and scope based on individual observation history. Beyond project-specific .kspec
      context.
    created_at: 2026-01-30T07:58:05.695Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG756XS1SYF6NM7D060N9TB1
    text: Kbot reimplements kspec shadow branch instead of using kspec as library.
      packages/memory/src/shadow/ duplicates functionality from kspec's parser/shadow.ts. Should add
      kspec as dependency and use its shadow branch utilities (detectShadow, initializeShadow,
      commitIfShadow, etc.) instead of maintaining parallel implementation. May need to parameterize
      kspec's shadow for different branch names (.kbot vs .kspec) or extend it.
    created_at: 2026-01-30T09:54:36.962Z
    tags:
      - architecture
      - tech-debt
    added_by: "@claude"
  - _ulid: 01KG7579T4KVDRP3G84GBG05FV
    text: >-
      Bot Personality System Design (from triage discussion):


      **System prompt injection (always included):**

      - Core identity (name, role, boundaries)

      - Recent important events/info


      **Storage (via kspec primitives in .kbot/):**

      - identity section in kbot.meta.yaml

      - observations for learned patterns

      - session context for ephemeral state


      **Communication preferences to track:**

      - Verbosity (concise/detailed)

      - Formality (casual/professional)  

      - Structure (bullets/prose)

      - Expertise level assumption


      **Evolution:**

      - Explicit: User tells bot directly

      - Reflection: Automatic + collaborative with user

      - Implicit: Derived from reflection


      **Blocked on:** kspec library integration (01KG756X) - should use kspec observations/meta
      rather than custom implementation


      **Research captured:** See personalization research from triage session - memory taxonomies,
      what to track, anti-patterns
    created_at: 2026-01-30T09:54:49.284Z
    tags:
      - personality
      - design
    added_by: "@claude"
  - _ulid: 01KG8MKXN7VZAYJF649EN6W6NM
    text: "Fix 5 lint errors on main blocking pre-commit hooks: 3 unused imports in bot.ts, unsafe any
      in identity.ts, unused chunkIndex in splitter.ts"
    created_at: 2026-01-30T23:43:05.895Z
    tags:
      - lint
      - blocker
    added_by: "@claude"
  - _ulid: 01KG8RPCE1VW5TNJ6APMCRPPYR
    text: "Document bash heredoc best practices in CLAUDE.md/AGENTS.md: prefer Python scripts or
      file-based approaches over complex heredoc escaping when dealing with special characters,
      nested quotes, or complex string generation"
    created_at: 2026-01-31T00:54:20.865Z
    tags:
      - reflection
      - documentation
    added_by: "@claude"
  - _ulid: 01KG8RRDA1S5T5JADE7W45GG4R
    text: Configure lefthook to lint only changed files on pre-commit (use {staged_files}), but ensure
      full lint runs regularly (e.g., pre-push hook or CI). This prevents unrelated lint errors from
      blocking commits while maintaining overall code quality.
    created_at: 2026-01-31T00:55:27.298Z
    tags:
      - reflection
      - tooling
    added_by: "@claude"
  - _ulid: 01KG8SR3VJ3C567QFYP4Q854E6
    text: Pre-commit hook should fail on Prettier violations instead of auto-fixing. Currently lefthook
      runs prettier --write which reformats after commit, allowing violations to be committed.
      Change to run prettier --check as a gate, preventing commits with formatting issues.
    created_at: 2026-01-31T01:12:46.194Z
    tags:
      - reflection
      - tooling
    added_by: "@claude"
  - _ulid: 01KG8SVYPXS033XX2TCVMJPQ21
    text: "Detect uncommitted changes on branches with merged PRs. Stop hook helps when ending session,
      but doesn't catch: (1) PR merged from GitHub UI while uncommitted changes exist locally, (2)
      manual branch switching without ending session. Could add git hook or branch-switching check
      to warn about stray uncommitted work."
    created_at: 2026-01-31T01:14:51.997Z
    tags:
      - reflection
      - tooling
    added_by: "@claude"
  - _ulid: 01KG8YX2V34TMDEA639WCB1AK2
    text: Add Bot-level integration test for restart recovery (AC-3/AC-9) - currently tested in
      messaging package but not end-to-end through Bot
    created_at: 2026-01-31T02:42:51.875Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG8YX59CTEWXX6PTPQA26AR7
    text: Have AgentLifecycle explicitly implement StderrProvider interface to avoid type cast in
      Bot.handleMessage usage tracking
    created_at: 2026-01-31T02:42:54.380Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG92W7TZHPC9AG5RJ5KSJ6P9
    text: "Terminal output handling rethink: Instead of 1MB in-memory buffer with truncation, capture
      terminal outputs to files by default. Return file path as metadata so agent can read output
      selectively (like Claude Code does). Truncate output sent to agent to avoid context blowout,
      but full output available via file. Also investigate ../kynetic-internal terminal support
      implementation for patterns/learnings."
    created_at: 2026-01-31T03:52:18.528Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG963F7D9FGYRCPZEE1XFNCT
    text: Bot harness /usage command interferes with agent message delivery - when harness sends /usage
      for context tracking, subsequent agent messages are not delivered to user via Discord. User
      sees partial responses cut off mid-task. Affects kbot sessions where agents may send multiple
      tool calls followed by text responses.
    created_at: 2026-01-31T04:48:41.198Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG96S5K00XGNTCS7WNBXX72X
    text: Agent messages concatenated without spacing/newlines - each tool call result appears
      immediately after previous text with only ':' separator (no space/newline). Should send
      separate messages per statement, especially important when tool call widgets are implemented
      for Discord visibility.
    created_at: 2026-01-31T05:00:32.225Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG96SE8P7CAC7DH4SRCBHMZC
    text: kbot-test session events.jsonl files are empty - events should capture raw session data like
      kynetic-bot/.kspec/sessions/ does. Currently only turns.jsonl has data but doesn't include
      tool call events, missing granular session event tracking.
    created_at: 2026-01-31T05:00:41.111Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG96SMK81MNYQ4XXQYNT723Z
    text: User messages sent during agent turn are swallowed/ignored - messages sent while agent is
      working should be queued and slotted inline in agent's message feed so agent can see and react
      to them mid-turn. Currently lost/never delivered to agent.
    created_at: 2026-01-31T05:00:47.592Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG96STMRGH5DMM42TWYH72WP
    text: Add Discord attachment support (images, files) - forward attachments from Discord messages to
      agent with appropriate handling. Images should be readable directly by agent (multimodal),
      other file types should be accessible with option to add format-specific adapters. Enable
      agent to request/process user-uploaded content.
    created_at: 2026-01-31T05:00:53.784Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG96T0NS03GJM95M2AQ9SMN9
    text: Agent self-restart mechanism to load new functionality - provide way for agent to
      restart/reload itself when new features are deployed or configuration changes. Should preserve
      conversation context and notify user of restart reason. Enables hot-reload of skills,
      adapters, and core functionality without losing session state.
    created_at: 2026-01-31T05:00:59.962Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG983125E66VYX55343BQEFB
    text: Implement kbot-specific skill system following Claude Code skill specification - support
      .claude/skills/ structure with SKILL.md files, skill invocation, and skill context loading.
      Should work across providers (not Claude-specific). Enables extending kbot capabilities via
      user-defined skills like /spec-plan, /task-work, etc.
    created_at: 2026-01-31T05:23:23.845Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG983728NQC4BGE2R4PNZBG5
    text: Auto-inject project context files when switching directories - when agent works with different
      projects, automatically load relevant context (AGENTS.md, README.md, .claude/settings.json,
      etc.). Paired with new tool/command for agent to set cwd/focus directory, enables seamless
      cross-project work without manual file reading.
    created_at: 2026-01-31T05:23:29.992Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG983DTDVQ2ND9KF3XZA9DA1
    text: Add SetWorkingDirectory tool for agent to change focus directory - new ACP tool allowing agent
      to explicitly set cwd/focus directory, triggering project context loading. Enables agent to
      navigate between projects (e.g., kbot-test -> kynetic-bot) and automatically receive relevant
      context files. Should update environment info shown to agent.
    created_at: 2026-01-31T05:23:36.909Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG9C1KWKFVK7YG588VN6BXYQ
    text: Create test harness to validate commands against real Claude Code instance - smoke tests for
      /context, /help and other commands to prevent silent failures. Integration test suite for
      harness-Claude Code interaction. Would have caught the /usage vs /context issue early.
    created_at: 2026-01-31T06:32:31.891Z
    tags: []
    added_by: Jacob Chapel
  - _ulid: 01KG9G7E3ZMH4MG0VA2S31YWP7
    text: "One-off and recurring triggers: Trigger system for scheduling agent activations with
      instructions. Enables semi-regular triggers for proactive assistance and autonomous task
      management. Should support both one-time and recurring schedules (cron-like)."
    created_at: 2026-01-31T07:45:36.896Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG9G7GE625ND7B9HDZH3TW4K
    text: "Multi-ACP-provider support: Enable using different ACP-compliant agent systems (codex-cli,
      gemini-cli, opencode-cli) as backends. Allow different models (OpenAI, Gemini, etc.) for
      different agents/subagents based on their strengths. Requires smoothing over provider
      differences for consistent behavior."
    created_at: 2026-01-31T07:45:39.271Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG9G99962P5A0ZFZSSQK7E75
    text: "Terminal killTerminal handler: Consider trying SIGTERM before SIGKILL for graceful shutdown.
      Current implementation uses SIGKILL directly which is appropriate for 'kill' semantics but
      some processes benefit from graceful termination first."
    created_at: 2026-01-31T07:46:37.478Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG9G9BT9V5FBSTTTPMT88R0M
    text: "Terminal killTerminal handler: Small race window between checking session.exited and calling
      kill(). Benign (kill on already-exited is no-op) but could be tightened with atomic
      check-and-kill pattern."
    created_at: 2026-01-31T07:46:40.073Z
    tags: []
    added_by: "@claude"
  - _ulid: 01KG9JB5P77ASACB9MY8KTFW6Q
    text: Add timing assertion utility with tolerance for flaky CI tests - tests using exact ms
      comparisons (e.g., expect(timeDiff).toBeGreaterThanOrEqual(100)) fail in CI due to timing
      jitter. Create a test utility like expectTiming(actual, expected, toleranceMs) or document the
      pattern of subtracting 5ms tolerance.
    created_at: 2026-01-31T08:22:36.488Z
    tags:
      - reflection
      - testing
    added_by: "@claude"
  - _ulid: 01KG9M9NZHW2ER3B1CKNGF8BV6
    text: "Discord message truncation: Messages getting cut off, likely hitting Discord 2000 character
      limit. Need research on proper handling - options include splitting messages, using embeds
      (6000 char), or file uploads for long content."
    created_at: 2026-01-31T08:56:44.785Z
    tags: []
    added_by: Test
  - _ulid: 01KG9M9R7X1S9C1V1BCZDZMK4Q
    text: "Webhook security research: Stateless middleman pattern for webhook delivery without opening
      bot to internet. WebSocket registration, JWT auth, best practices. Needed for trigger system
      Phase 3 webhook implementation."
    created_at: 2026-01-31T08:56:47.102Z
    tags: []
    added_by: Test
